# =============================================================================
# CONECTA PLUS - PRODUCTION ENVIRONMENT VARIABLES
# =============================================================================
# IMPORTANTE: Este é um arquivo de exemplo. Copie para .env.production e
# configure com valores reais antes do deploy.
#
# Gerar SECRET_KEY segura:
# python -c "import secrets; print(secrets.token_urlsafe(64))"
#
# Gerar senha forte:
# openssl rand -base64 32
# =============================================================================

# =============================================================================
# APP CONFIGURATION
# =============================================================================
APP_NAME="Conecta Plus API"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT=production

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_PREFIX=/api/v1

# IMPORTANTE: Substitua pelos seus domínios reais
ALLOWED_ORIGINS=["https://seudominio.com.br","https://www.seudominio.com.br","https://api.seudominio.com.br"]

# =============================================================================
# DATABASE
# =============================================================================
# IMPORTANTE: Substitua 'SUA_SENHA_SEGURA_DB' por uma senha forte
# Para Docker Compose: use 'db' como host
# Para RDS/Cloud SQL: use o endpoint fornecido
DATABASE_URL=postgresql+asyncpg://postgres:SUA_SENHA_SEGURA_DB@db:5432/conecta_plus

# Pool de conexões
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# =============================================================================
# REDIS
# =============================================================================
# Para Docker Compose: redis://redis:6379/0
# Para ElastiCache/Cloud: use o endpoint fornecido
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=10
CACHE_TTL_SECONDS=300

# =============================================================================
# JWT / SECURITY
# =============================================================================
# CRÍTICO: GERAR UMA NOVA SECRET_KEY PARA PRODUÇÃO!
# Execute: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=GERE_UMA_CHAVE_SUPER_SEGURA_AQUI_COM_PELO_MENOS_64_CARACTERES

# Algoritmo de criptografia
ALGORITHM=HS256

# Tempo de expiração dos tokens (em minutos para access, dias para refresh)
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_AUTH_REQUESTS=5
RATE_LIMIT_AUTH_WINDOW=300

# =============================================================================
# SECURITY
# =============================================================================
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=600
SECURE_COOKIES=true

# IMPORTANTE: Adicione seus domínios reais
TRUSTED_HOSTS=["api.seudominio.com.br","seudominio.com.br"]

# =============================================================================
# MINIO / S3 STORAGE
# =============================================================================
# Para AWS S3
MINIO_ENDPOINT=s3.amazonaws.com
MINIO_ACCESS_KEY=SUA_AWS_ACCESS_KEY
MINIO_SECRET_KEY=SUA_AWS_SECRET_KEY
MINIO_BUCKET=conecta-plus-prod
MINIO_SECURE=true
MINIO_PUBLIC_URL=https://s3.amazonaws.com/conecta-plus-prod

# Para MinIO self-hosted
# MINIO_ENDPOINT=minio.seudominio.com.br:9000
# MINIO_ACCESS_KEY=minioadmin
# MINIO_SECRET_KEY=SUA_SENHA_MINIO
# MINIO_BUCKET=conecta-plus
# MINIO_SECURE=true
# MINIO_PUBLIC_URL=https://minio.seudominio.com.br

# =============================================================================
# FIREBASE (Opcional - para notificações push)
# =============================================================================
FIREBASE_ENABLED=false
FIREBASE_CREDENTIALS_PATH=/app/config/firebase-credentials.json

# =============================================================================
# EMAIL / SMTP
# =============================================================================
# Para Gmail (usar App Password)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=seu-email@gmail.com
SMTP_PASSWORD=sua-senha-app-gmail
SMTP_FROM_EMAIL=noreply@seudominio.com.br
SMTP_USE_TLS=true

# Para SendGrid
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=SUA_API_KEY_SENDGRID
# SMTP_FROM_EMAIL=noreply@seudominio.com.br
# SMTP_USE_TLS=true

# Para AWS SES
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=SUA_SMTP_USERNAME_SES
# SMTP_PASSWORD=SUA_SMTP_PASSWORD_SES
# SMTP_FROM_EMAIL=noreply@seudominio.com.br
# SMTP_USE_TLS=true

# =============================================================================
# LOGGING
# =============================================================================
# Níveis: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=WARNING
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log

# =============================================================================
# PAGINATION
# =============================================================================
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# =============================================================================
# FILE UPLOAD
# =============================================================================
# Tamanho máximo em bytes (10MB padrão)
MAX_UPLOAD_SIZE=10485760

# =============================================================================
# GUNICORN (Production Server)
# =============================================================================
# Número de workers: recomendado (2-4 x CPU cores)
# Para 2 CPUs: 4-8 workers
GUNICORN_WORKERS=4
GUNICORN_BIND=0.0.0.0:8100

# Níveis de log: debug, info, warning, error, critical
GUNICORN_LOG_LEVEL=warning

# =============================================================================
# PROMETHEUS METRICS
# =============================================================================
ENABLE_METRICS=true

# =============================================================================
# DOCKER COMPOSE VARIABLES (para .env na raiz)
# =============================================================================
# Estas variáveis devem estar em um arquivo .env separado na raiz do projeto
# para uso do docker-compose.prod.yml

# Senha do PostgreSQL
DB_PASSWORD=SUA_SENHA_POSTGRESQL_SUPER_SEGURA

# Secret Key para JWT (mesma do SECRET_KEY acima)
SECRET_KEY=MESMA_CHAVE_SUPER_SEGURA_DE_CIMA

# Senha do Grafana (se usar monitoring)
GRAFANA_PASSWORD=SUA_SENHA_GRAFANA

# =============================================================================
# CLOUD SPECIFIC (se aplicável)
# =============================================================================

# AWS
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=SUA_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=SUA_SECRET_KEY

# Google Cloud
# GOOGLE_CLOUD_PROJECT=seu-projeto
# GOOGLE_APPLICATION_CREDENTIALS=/app/config/gcp-credentials.json

# Azure
# AZURE_SUBSCRIPTION_ID=sua-subscription
# AZURE_TENANT_ID=seu-tenant
# AZURE_CLIENT_ID=seu-client
# AZURE_CLIENT_SECRET=seu-secret

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Sentry (Error tracking)
# SENTRY_DSN=https://xxx@sentry.io/xxx
# SENTRY_ENVIRONMENT=production

# New Relic
# NEW_RELIC_LICENSE_KEY=sua-license-key
# NEW_RELIC_APP_NAME=Conecta Plus API

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# FEATURE_USER_REGISTRATION=true
# FEATURE_EMAIL_VERIFICATION=true
# FEATURE_TWO_FACTOR_AUTH=false

# =============================================================================
# INTEGRATIONS
# =============================================================================

# WhatsApp Business API (se usar)
# WHATSAPP_API_URL=https://api.whatsapp.com
# WHATSAPP_TOKEN=seu-token
# WHATSAPP_PHONE_NUMBER_ID=seu-phone-id

# Stripe (pagamentos - se usar)
# STRIPE_API_KEY=sk_live_xxxxx
# STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# =============================================================================
# CHECKLIST DE SEGURANÇA - ANTES DE FAZER DEPLOY
# =============================================================================
# [ ] DEBUG=false
# [ ] SECRET_KEY gerada aleatoriamente (64+ caracteres)
# [ ] DB_PASSWORD forte (32+ caracteres)
# [ ] ALLOWED_ORIGINS configurado com seus domínios reais
# [ ] TRUSTED_HOSTS configurado com seus domínios reais
# [ ] SECURE_COOKIES=true
# [ ] Senhas de SMTP configuradas
# [ ] Credenciais de cloud/storage configuradas
# [ ] LOG_LEVEL=WARNING ou ERROR
# [ ] RATE_LIMIT_ENABLED=true
# [ ] Remover variáveis não utilizadas
# [ ] Não commitar este arquivo com valores reais no Git!

# =============================================================================
# NOTAS IMPORTANTES
# =============================================================================
# 1. NUNCA commite este arquivo com valores reais no Git!
# 2. Use um gerenciador de secrets em produção (AWS Secrets Manager,
#    Google Secret Manager, Azure Key Vault, etc.)
# 3. Gere sempre novas chaves e senhas para cada ambiente
# 4. Mantenha backups seguros das variáveis de ambiente
# 5. Use diferentes credenciais para dev/staging/production
# 6. Revise regularmente as permissões de acesso
# 7. Habilite autenticação de dois fatores onde possível
# 8. Monitore logs de acesso e erros regularmente
# =============================================================================
