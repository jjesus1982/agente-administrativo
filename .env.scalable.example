# Conecta Plus Scalable Environment Variables
# Configuration for 1000+ concurrent users with load balancing

# =============================================================================
# APP CONFIGURATION
# =============================================================================
APP_NAME="Conecta Plus API Cluster"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT=production
DOMAIN=your-domain.com

# =============================================================================
# API CLUSTER CONFIGURATION
# =============================================================================
API_PREFIX=/api/v1
ALLOWED_ORIGINS=["https://your-domain.com","https://www.your-domain.com","https://app.your-domain.com"]

# =============================================================================
# DATABASE CLUSTER
# =============================================================================
DATABASE_URL=postgresql+asyncpg://postgres:CHANGE_DB_PASSWORD@db-master:5432/conecta_plus
DATABASE_READ_URL=postgresql+asyncpg://postgres:CHANGE_DB_PASSWORD@db-replica:5432/conecta_plus
DB_PASSWORD=CHANGE_DB_PASSWORD_STRONG_64_CHARS
REPLICATION_PASSWORD=CHANGE_REPLICATION_PASSWORD_32_CHARS

# Database pool settings for high load
DB_POOL_SIZE=40
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# =============================================================================
# REDIS CLUSTER
# =============================================================================
REDIS_URL=redis://redis-sentinel:26379/0
REDIS_MASTER_NAME=conecta-master
REDIS_PASSWORD=CHANGE_REDIS_PASSWORD_HERE
REDIS_MAX_CONNECTIONS=20
CACHE_TTL_SECONDS=300

# =============================================================================
# JWT / SECURITY (CRITICAL - CHANGE IN PRODUCTION!)
# =============================================================================
SECRET_KEY=CHANGE_ME_GENERATE_SECURE_64_CHAR_KEY_python_-c_import_secrets_print_secrets_token_urlsafe_64
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# ENHANCED RATE LIMITING FOR SCALE
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=150  # Higher for clustered environment
RATE_LIMIT_WINDOW=60
RATE_LIMIT_AUTH_REQUESTS=5
RATE_LIMIT_AUTH_WINDOW=300

# =============================================================================
# SECURITY
# =============================================================================
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=600
SECURE_COOKIES=true
TRUSTED_HOSTS=["your-domain.com","www.your-domain.com","app.your-domain.com"]

# =============================================================================
# MINIO / S3 CDN
# =============================================================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=your-minio-access-key
MINIO_SECRET_KEY=your-minio-secret-key-32-chars
MINIO_BUCKET=conecta-plus
MINIO_SECURE=false
MINIO_PUBLIC_URL=https://your-domain.com/cdn
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=change-minio-password-here

# =============================================================================
# EMAIL / SMTP
# =============================================================================
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@your-domain.com
SMTP_USE_TLS=true

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=""

# =============================================================================
# PAGINATION (Optimized for high load)
# =============================================================================
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=50  # Reduced to prevent large queries

# =============================================================================
# FILE UPLOAD
# =============================================================================
MAX_UPLOAD_SIZE=10485760
UPLOAD_BASE_DIR=/app/uploads

# =============================================================================
# GUNICORN CLUSTER CONFIGURATION
# =============================================================================
GUNICORN_WORKERS=8  # 2 workers per core (4 cores)
GUNICORN_BIND=0.0.0.0:8100
GUNICORN_LOG_LEVEL=warning
GUNICORN_TIMEOUT=120
GUNICORN_MAX_REQUESTS=10000
GUNICORN_MAX_REQUESTS_JITTER=1000

# =============================================================================
# PROMETHEUS METRICS
# =============================================================================
ENABLE_METRICS=true

# =============================================================================
# MONITORING PASSWORDS
# =============================================================================
GRAFANA_PASSWORD=change-grafana-admin-password-here

# =============================================================================
# SSL CONFIGURATION
# =============================================================================
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=conecta-backups

# =============================================================================
# INSTANCE IDENTIFICATION
# =============================================================================
INSTANCE_ID=auto  # Will be set automatically by each container

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s